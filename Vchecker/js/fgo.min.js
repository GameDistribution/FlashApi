(function(f){function n(){if("undefined"===typeof google||"undefined"===typeof google.ima)q("//imasdk.googleapis.com/js/sdkloader/ima3.js",function(){n()});else if("undefined"===typeof $)q("//code.jquery.com/jquery-2.1.4.min.js",function(){n()});else{for(var c=document.getElementsByTagName("object"),r=document.getElementsByTagName("embed"),d=0;d<c.length;d++){var z=c[d];"undefined"!==typeof z.jsGDO&&(e.master=new p(z))}for(d=0;d<r.length;d++)c=r[d],"undefined"!==typeof c.jsGDO&&(e.master=new p(c));
"undefined"!==typeof e.master&&(f.pauseGame=e.master.pauseGame,f.resumeGame=e.master.resumeGame,f.requestAds=e.master.requestAds,f.jsShowBanner=e.master.requestAds,e.master.jsOnAdsReady())}}function p(c){function r(a){b._adsManager=a.getAdsManager(h);b._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v);b._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,d);b._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,f);b._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,
g);b._adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,A);b._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,n);b._adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,q);try{b._adsManager.init(k.innerWidth(),k.innerHeight(),google.ima.ViewMode.NORMAL),b._adsManager.start()}catch(I){w()}}function d(a){a=a.getAd();h.jsOnAdsLoaded(a.getContentType());a.isLinear()||(b._container.firstChild.style.top="-"+(k.innerHeight()-a.getHeight())/2+"px",b._container.style["background-color"]=
"#f0f0f0",B=setTimeout(m,15E3))}function f(a){a=a.getAd();h.jsOnAdsStarted();p();a.isLinear()&&(t=setInterval(function(){},300))}function g(a){a.getAd()}function A(a){a.getAd().isLinear()&&clearInterval(t);m()}function n(a){a.getAd().isLinear()&&clearInterval(t);m()}function q(a){a.getAd().isLinear()&&clearInterval(t);m()}function v(a){console.log(a.getError());m();h.jsOnAdsError()}function m(){if("undefined"!==typeof b._adsManager){h.jsOnAdsClosed();try{b._adsManager.destroy(),w()}catch(a){}delete b._adsManager}"undefined"!==
typeof b._container&&(document.body.removeChild(b._container),delete b._container);clearTimeout(B)}function p(){h.jsPauseGame()}function w(){h.jsResumeGame()}var b=this,h=c,l=e.q[0][1],k=$(h);h.jsGDO();var u,x,t,B;c=e.q[0][2];var y;Date.prototype.getUnixTime=function(){return this.getTime()/1E3|0};32===l.length&&(l=l.substr(0,8)+"-"+l.substring(8,12)+"-"+l.substring(12,16)+"-"+l.substring(16,20)+"-"+l.substring(20,32));var C=D();var E="https://pub.tunnl.com/at?id="+l+"&pageurl="+C+"&type=1&time="+
(new Date).toDateString();F("GET",E,null,function(a){a&&(a=JSON.parse(a),y=a.AdTagId,(new Image).src="https://pub.tunnl.com/DistEvent?tid="+y+"&game_id="+l+"&disttype=1&eventtype=1")});(new Image).src="https://analytics.tunnl.com/collect?type=flash&evt=game.play&uuid="+l+"&aid="+c+"&c="+(new Date).getUnixTime();return{requestAds:function(){m();var a=k.offset();b._container=document.createElement("div");b._container.style.position="absolute";b._container.style.width=k.innerWidth()+"px";b._container.style.height=
k.innerHeight()+"px";b._container.style.top=a.top+"px";b._container.style.left=a.left+"px";b._container.style.zIndex=9999;b._containerjq=$(b._container);document.body.appendChild(b._container);x=new google.ima.AdDisplayContainer(b._container);x.initialize();u=new google.ima.AdsLoader(x);u.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,r,!1);u.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,v,!1);a=new google.ima.AdsRequest;for(var c=k.innerWidth(),d=k.innerHeight(),
g={w:0,h:0},e=[{w:728,h:480},{w:728,h:90},{w:640,h:480},{w:336,h:280},{w:300,h:250},{w:250,h:250},{w:200,h:200}],h=0;h<e.length;h++){var f=e[h];c>=f.w&&d>=f.h&&f.w>=g.w&&f.h>=g.h&&(g=f)}0!=g.w&&(c="https://pub.tunnl.com/opp?tid="+y+"&player_width=640&player_height=480&page_url="+encodeURIComponent(C)+"&game_id="+l,a.adTagUrl=c,a.linearAdSlotWidth=k.innerWidth(),a.linearAdSlotHeight=k.innerHeight(),a.nonLinearAdSlotWidth=k.innerWidth(),a.nonLinearAdSlotHeight=k.innerHeight(),a.forceNonLinearFullSlot=
!0,a.disableCompanionAds=!0,u.requestAds(a))},pauseGame:p,resumeGame:w,jsOnAdsReady:function(){h.jsOnAdsReady()}}}function q(c,f){var d=document.createElement("script");d.type="text/javascript";d.readyState?d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=null,f()}:d.onload=function(){f()};d.src=c;document.getElementsByTagName("head")[0].appendChild(d)}function F(c,f,d,e){try{var g=new XMLHttpRequest}catch(A){try{g=new XDomainRequest}catch(G){try{g=
new ActiveXObject("Msxml2.XMLHTTP")}catch(H){try{g=new ActiveXObject("Microsoft.XMLHTTP")}catch(v){console.log("\nThe browser is not compatible with XHR2")}}}}g.open(c,f,!0);"POST"===c&&g.setRequestHeader("Content-Type","application/json");g.onreadystatechange=function(c){4==g.readyState&&200==g.status&&e(g.responseText)};g.onerror=function(c){e()};"POST"===c?g.send(JSON.stringify(d)):g.send()}function D(){var c=(f.location!==f.parent.location?document.referrer&&""!==document.referrer?document.referrer.split("/")[2]:
document.location.host:document.location.host).replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0];console.info("Referrer domain: "+c);if(-1!==document.referrer.indexOf("gameplayer.io")&&(c="gamedistribution.com",-1!==document.referrer.indexOf("?ref="))){var e=document.referrer.substr(document.referrer.indexOf("?ref=")+5);""!==e&&"{portal%20name}"!==e&&"{portal name}"!==e&&(c=e.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").split("/")[0],console.info("Spil referrer domain: "+c))}return c}var e=f.fgo;
"undefined"===typeof e.master&&n()})(window);
